library(tidyverse)
install.packages(tidyverse)
install.packages("tidyverse")
library(tidyverse)
library(ggplot2)
install.packages("readxl")
library(readxl)
file <- "raw_data\qnet_monthly.xls"
file <- 'raw_data\qnet_monthly.xls'
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
file <- 'raw_data/qnet_monthly.xls'
read_excel(file)
excel_sheets(file)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(raw_meters)
str(raw_towns)
?read_excel
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
raw_towns
View(raw_towns)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(raw_towns)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
raw_towns
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
raw_towns
str(raw_towns)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
raw_towns
?gather
?pivot_longer
vignette("pivot")
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
raw_towns
View(raw_towns)
?read_excel
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(raw_towns)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
raw_towns
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
raw_meters
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
raw_meters
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
raw_meters
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(raw_towns)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
?filter
filter(raw_towns, date >= 1/2019)
View(raw_towns)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
filter(raw_towns, date >= 1/2019)
?pivot_longer
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
raw_towns
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(raw_meters)
View(raw_towns)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(raw_meters)
View(raw_towns)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(raw_towns)
View(raw_meters)
View(raw_towns)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(raw_meters)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(raw_meters)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(raw_meters)
View(raw_towns)
raw_meters$townav <- raw_towns$Q_MGD[raw_towns$Town == raw_meters$town & raw_towns$date == raw_meters$date]
raw_towns$Q_MGD[raw_towns$Town == raw_meters$town & raw_towns$date == raw_meters$date]
raw_towns$Q_MGD[raw_towns$town == raw_meters$town & raw_towns$date == raw_meters$date]
raw_meters$townav <- raw_towns$Q_MGD[raw_towns$Town == raw_meters$town & raw_towns$date == raw_meters$date]
raw_meters$townav <- raw_towns$Q_MGD[raw_towns$town == raw_meters$town & raw_towns$date == raw_meters$date]
View(raw_meters)
?sapply
raw_meters <- mutate(raw_meters, est_ratio = Q_MGD/
raw_towns$Q_MGD[raw_towns$town == town &
raw_towns$month== month &
raw_towns$year == year]
)
View(raw_meters)
raw_meters <- mutate(raw_meters, est_ratio = Q_MGD/
raw_towns$Q_MGD[raw_towns$town == town &
raw_towns$month== month &
raw_towns$year == year]/)
raw_meters <- mutate(raw_meters, est_ratio = raw_towns$Q_MGD[raw_towns$town == town &
raw_towns$month== month &
raw_towns$year == year]/Q_MGD)
View(raw_meters)
raw_meters <- mutate(raw_meters, est_ratio = raw_towns$Q_MGD[raw_towns$town == town &
raw_towns$month== month &
raw_towns$year == year])
View(raw_meters)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(raw_meters)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
raw_meters <- mutate(raw_meters, est_ratio = raw_towns$Q_MGD[raw_towns$town == town &
raw_towns$month== month &
raw_towns$year == year])
View(raw_meters)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(raw_towns)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
final_data$Q_MGD
final_data$Q_MGD[date == date & meter == "TOTAL" ]
final_data$Q_MGD[final_data$date == date & meter == "TOTAL" ]
final_data$Q_MGD[final_data$date == final_data$date & meter == "TOTAL" ]
View(final_data)
final_data$Q_MGD[final_data$date == final_data$date & final_data$meter == "TOTAL" ]
final_data$Q_MGD[final_data$date == final_data$date]
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
final_data$Q_MGD[final_data$date == final_data$date & final_data$meter == "TOTAL" ]
test_met <- raw_meters[town == "Arlington"]
test_met <- raw_meters[raw_meters$town == "Arlington"]
View(raw_meters)
raw_meters[raw_meters$town == "Arlington"]
test_met <- raw_meters$town == "Arlington"]
test_met <- raw_meters$town == "Arlington"
View(raw_towns)
test_met <- raw_meters[raw_meters$town == "Arlington"]
test_met <- raw_meters[,raw_meters$town == "Arlington"]
test_met <- raw_meters[raw_meters$town == "Arlington",]
View(test_met)
test_town <- raw_towns[raw_towns$town == "Arlington",]
merge(test_met, test_town)
?merge
merge(test_met[, c("town", 'meter', 'month', 'year', 'Q_MGD'],
test_town, by= c('town', 'month', 'year')
merge(test_met[, c("town", 'meter', 'month', 'year', 'Q_MGD'], test_town, by = c('town', 'month', 'year')
merge(test_met, test_town$Q_MGD, by = c('town', 'month', 'year'))
View(test_town)
test_town[,c('town', 'month', 'year')]
test_met[,c('town', 'month', 'year')]
merge(test_met[,], test_town$Q_MGD, by = c('town', 'month', 'year'))
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
?join
inner_join(raw_meters, raw_towns)
full_join(raw_meters, raw_towns,)
full_join(raw_meters, raw_towns,)
full_join(raw_meters, raw_towns)
right_join(raw_meters, raw_towns)
left_join(raw_meters, raw_towns)
left_join(raw_meters, raw_towns, by = c('town', 'month', 'year'))
inner_join(raw_meters, raw_towns, by = c('town', 'month', 'year'))
left_join(raw_meters, raw_towns[,'TOTAL_MGD'], by = c('town', 'month', 'year'))
left_join(raw_meters, raw_towns[,'TOT_MGD'], by = c('town', 'month', 'year'))
left_join(raw_meters, raw_towns, by = c('town', 'month', 'year'))
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(final_data)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(final_data)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(final_data)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(final_data)
View(final_data)
?filter
filter(final_data, year == 2016:2018)
filter(final_data, year == c(2016:2018)
)
filter(final_data, year == 2016)
filter(final_data, year == c(2016,2017,2018)
)
ungroup(final_data)
ungroup(final_data) %>% filter(year == c(2016,2017,2018))
filter(final_data, year == c(2016)
)
ungroup(final_data) %>% filter(year == c(2016,2017,2018))
as.character(final_data$year)
ungroup(final_data) %>% filter(as.character(year) == c("2016","2017","2018"))
filter(final_data, year == c(2016,2017,2018), month == c(1:12)
)
filter(final_data, year == c(2016,2017,2018))
View(final_data)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
filter(final_data, year == c(2016,2017,2018))
?sort
str(final_data)
str(final_data)
unique(final_data$year)
group_by(final_data, year)
filter(group_by(final_data, year), year == c(2016:2018))
?filter
?filter_all
filter_all(final_data, year == c(2016,2017,2018))
filter(final_data, year == c(2016,2017,2018))
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
filter(final_data, year == c(2016,2017,2018))
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
filter(final_data, year == c(2016,2017,2018))
filter(final_data, year == c(2016,2017,2018), .preserve = TRUE)
filter_all(final_data, year == c(2016,2017,2018))
final_data
filter(final_data, year == c(2016,2017,2018))
filter(final_data, year <= 2018)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(cy2019_data)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
?aggregate
pre2019_ratios <- final_data %>%
mutate(est_ratio = TOT_MGD/Q_MGD) %>%
filter(year <= 2018) %>%
aggregate(by = "date")
pre2019_ratios <- final_data %>%
mutate(est_ratio = TOT_MGD/Q_MGD) %>%
filter(year <= 2018) %>%
aggregate(by = "date", FUN = mean)
pre2019_ratios <- final_data %>%
mutate(est_ratio = TOT_MGD/Q_MGD) %>%
filter(year <= 2018) %>%
aggregate(by = final_data$date, FUN = mean)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
pre2019_ratios <- final_data %>%
mutate(est_ratio = TOT_MGD/Q_MGD) %>%
filter(year <= 2018) %>%
aggregate(FUN = mean)
pre2019_ratios <- final_data %>%
mutate(est_ratio = TOT_MGD/Q_MGD) %>%
filter(year <= 2018) %>%
aggregate(by = c("date", "year", "month")FUN = mean)
pre2019_ratios <- final_data %>%
mutate(est_ratio = TOT_MGD/Q_MGD) %>%
filter(year <= 2018) %>%
aggregate(by = c("date", "year", "month"),FUN = mean)
?c
?aggregate
pre2019_ratios <- final_data %>%
mutate(est_ratio = TOT_MGD/Q_MGD) %>%
filter(year <= 2018) %>%
aggregate(by = list("date", "year", "month"),FUN = mean)
pre2019_ratios <- final_data %>%
mutate(est_ratio = TOT_MGD/Q_MGD) %>%
filter(year <= 2018) %>%
aggregate(by = list(final_data$date),FUN = mean)
aggregate(pre2019_data, by = list(pre2019_data$date), FUN = mean)
aggregate(pre2019_data, by = list(pre2019_data$town, pre2019_data$meter, pre2019_data$month), FUN = mean)
View(pre2019_data)
aggregate(pre2019_data$est_ratio, by = list(pre2019_data$town, pre2019_data$meter, pre2019_data$month), FUN = mean)
View(pre2019_data)
aggregate(pre2019_data$est_ratio, by = list(town, meter, month), FUN = mean)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(pre2019_ratios)
View(cy2019_data)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(final_data)
View(raw_towns)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(act2019_town)
View(final_data)
View(final_data)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(raw_meters)
View(raw_towns)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(pre2019_ratios)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(pre2019_ratios)
?summarise_each
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(pre2019_ratios)
View(pre2019_ratios)
View(pre2019_ratios)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(pre2019_ratios)
summarise()
?summarise
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(pre2019_ratios)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(model_ratios)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(act2019_meter)
View(model_ratios)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(estimates_2019)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(estimates_2019)
View(act2019_town)
View(act2019_town)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(model_ratios)
View(final_data)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(estimates_2019)
View(model_ratios)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(estimates_2019)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(comp_table)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(best_meter)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(best_meter)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(best_meter)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(best_meter)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(comp_table)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_worst_month)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_best_meter)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_best_meter)
View(est_worst_month)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_best_meter)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_comp_table)
View(est_comp_table)
?summarise_each
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_best_meter)
?left_join
View(est_best_meter)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_best_meter)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_best_meter)
View(est_comp_table)
View(final_data)
View(model_ratios)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_model_ratios)
View(est_2019)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_all_meter)
View(est_comp_table)
View(est_2019)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
last_error()
library(rlang)
last_error()
View(est_model_ratios)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_model_ratios)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
?rename
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_2019)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_comp_table)
View(est_comp_table)
View(act2019_meter)
View(est_2019)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_comp_table)
View(est_all_meter)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_all_meter)
View(est_comp_table)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_all_meter)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_all_meter)
View(est_comp_table)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_comp_table)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
p <- ggplot(est_comp_table[,"town" == "Arlington"], x = meter, y = diff.ratio ) +
geom_boxplot()
View(p)
print(p)
p
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
View(est_comp_table)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
p
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
p
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
p
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
p
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
p
p
est_comp_table[,"town" == "Arlington"]
est_comp_table[,town == "Arlington"]
est_comp_table[,1)
est_comp_table[,1]
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
p
est_comp_table["town" == "Arlington",]
est_comp_table[est_comp_table$town == "Arlington",]
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
p
View(est_best_meter)
source('C:/Users/greeley_m/projects/Wastewater_Model/Wastewater_Model.R')
p_bos
p_arl
